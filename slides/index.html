<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ES6 and beyond</title>
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css" id="theme">
        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
          document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>
    </head>
    <body>

        <div class="reveal">
            <div class="slides"><section  data-markdown><script type="text/template"># ES6 and beyond

<img src="./images/js-big.png" width="400px" /><br>
<small>by Peter Cosemans</small>
</script></section><section ><section data-markdown><script type="text/template">
# ES5, ES6, ES2016, ES.Next

> What's going on with JavaScript versioning
</script></section><section data-markdown><script type="text/template">
## Terms of terminology

- ECMAScript
- JavaScript
- ECMAScript 5 (ES5) - 2009
- ECMAScript 6 (ES6/ES2015) - 2015
- ECMAScript 2016 (ES7) - 2016
- ES.Next
- TC39

Check out these [compatibility tables](http://kangax.github.io/compat-table/es6/)

<aside class="notes" data-markdown>- ECMAScript: A language standardized by ECMA International.
- JavaScript: The commonly used name for implementations of the ECMAScript standard
- ECMAScript 5 (ES5): The 5th edition of ECMAScript, standardized in 2009
- ECMAScript 6 (ES6/ES2015): The 6th edition of ECMAScript, standardized in 2015.
- ECMAScript 2016: The 7th edition of ECMAScript</aside></script></section><section data-markdown><script type="text/template">
## TC39

The Ecma TC39 committee is responsible for evolving the ECMAScript programming language and authoring the specification. The committee operates by consensus and has discretion to alter the specification as it sees fit.
</script></section><section data-markdown><script type="text/template">
## The TC39 Process

- Stage 0: Initial input
- Stage 1: Proposal (spec, polyfill, demo)
- Stage 2: Draft (ready for testing)
- Stage 3: Candidate (almost there, last bits)
- Stage 4: Finished (ready)

[TC39 Github Proposals](https://github.com/tc39/proposals)
</script></section><section data-markdown><script type="text/template">
## Typescript

<img src="./images/typescript.jpg" width="400px" />

Versions: 1.7, 1.8, 2.0, 2.1, ...

See the [RoadMap](https://github.com/Microsoft/TypeScript/wiki/Roadmap)
</script></section></section><section ><section data-markdown><script type="text/template">
# ES6+ today

> How can I use all these new features on my current platforms?
</script></section><section data-markdown><script type="text/template">
## ES6 Support today

#### Edge, Chrome, Firefox and Safari

+95%

#### Node 6.x

+95%

[See Compatibility Tables](http://kangax.github.io/compat-table/es6/)

<small>If you need more (ES Modules, ES7/ES8, Typescript, ...)
you need to transpile.<small>
</script></section><section data-markdown><script type="text/template">
## Babel - Node

    // .babelrc
    {
        "presets": ["es2017"],
        "plugins": [
            "transform-object-rest-spread",
            ...
        ]
    }

    // index.js (this file is ES5 with commonJS)
    require('babel-core/register');
    require('./server');

    // server.js (fully ES6/ES7)
    import app from './express';

    // startup
    node index.js

For the production build, make sure you transpile to ES5

    babel -d ./build ./server -s --ignore *.test.js"

> This is also possible with TypeScript 2.1+
</script></section><section data-markdown><script type="text/template">
## Babel - Browser

```json
    // .babelrc
    {
        "presets": ["es2017"],
        "plugins": [
            "transform-object-rest-spread",
            ...
        ]
    }
```

```javascript
    // webpack.config.js
    module.exports = {
        entry: './main.js',
        output: { path: __dirname, filename: 'bundle.js' },
        module: {
            loaders: [
                {
                    test: /.js?$/,
                    loader: 'babel-loader',
                    exclude: /node_modules/,
                }
            ]
        },
    };
```
</script></section><section data-markdown><script type="text/template">
## TypeScript

```json
    // tsconfig.json
    {
        "compilerOptions": {
            "declaration": false,
            "emitDecoratorMetadata": true,
            "experimentalDecorators": true,
            "module": "es6",
            "moduleResolution": "node",
            "target": "es5",
            ...
        }
    }
```

```javascript
    // webpack.config.js
    module.exports = {
        entry: './main.js',
        output: { path: __dirname, filename: 'bundle.js' },
        module: {
            loaders: [
                {
                    test: /.ts?$/,
                    loader: 'ts-loader',
                }
            ]
        },
    };
```
</script></section><section data-markdown><script type="text/template">
## Don't forget the polyfills

For Map, Set, Object.xxx, ...
<br><small>If you target older browsers (IE, PhantomJS, ...)</small>

```javascript
    // index.js
    import 'core-js';
    // or babel/polyfill
    // or es6-shim
```

```javascript
    // polyfills.ts (from angular2)
    import 'core-js/es6/symbol';
    import 'core-js/es6/object';
    import 'core-js/es6/function';
    import 'core-js/es6/parse-int';
    import 'core-js/es6/parse-float';
    import 'core-js/es6/number';
    import 'core-js/es6/math';
    import 'core-js/es6/string';
    import 'core-js/es6/date';
    import 'core-js/es6/array';
    ...
    import 'core-js/es7/reflect';
    import 'zone.js/dist/zone';
```
</script></section></section><section ><section data-markdown><script type="text/template">
# The Basic Features of ES6

> What you probably already know.
</script></section><section data-markdown><script type="text/template">
## The let keyword

```javascript
    // ES5 - block scoping
    var message = 'hi';
    {
        var message = 'bye';
    }
    console.log(message)      --> output: ?
```

```javascript
    // ES5 - function scoping
    var message = 'hi';
    function greet() {
        var message = 'bye';
    }
    greet();                  --> Output ?
```
<!-- .element: class="fragment" data-fragment-index="1" -->

```javascript
    // ES6 - block scoping with let
    let message = 'hi';
    {
        let message = 'bye';
    }
    console.log(message)      --> output: ?
```
<!-- .element: class="fragment" data-fragment-index="2" -->
</script></section><section data-markdown><script type="text/template">
## The const keyword

```javascript
    // ES5
    var message = 'hi';
    return message;

    // ES6
    const message = 'hi'
    message = 'hello'           <-- ERROR
```

So don't use 'var' anymore. By default use 'const' and use 'let' when needed.

> const is not immutable!

```javascript
    const names = [];
    names.push( "Jordan" );     <-- No Error
    console.log( names );
```

'const' defines a constant Reference, Not a Value
</script></section><section data-markdown><script type="text/template">
## Default Argument Values

```javascript
    var myFunction = function(a, b, c){
        a = a || 10;
        b = b || 5;
        c = c || 8;
        return a*b*c;
    };
```

```javascript
    var myFunction = function(a=10, b=5, c=8){
        return a*b*c;
    };
```
</script></section><section data-markdown><script type="text/template">
## Property value shorthand

```javascript
    // ES3/ES5
    function getCar(make, model, value) {
        return {
            make: make,
            model: model,
            value: value
        };
    }
```

vs

```javascript
    // ES6
    // With property value shorthand syntax, you can omit the property
    // value if key matches variable name.
    function getCar(make, model, value) {
        return {
            make,
            model,
            value
        };
    }
```
</script></section><section data-markdown><script type="text/template">
## Computed property keys

```javascript
    // ES3/ES5
    function getCar(make, model, value) {
        var car = {};
        car['make' + make] = true;
        return car;
    }
```

vs

```javascript
    // ES6
    // Computed values now work with object literals
    function getCar(make, model, value) {
        return {
            ['make' + make]: true
        };
    }
```
</script></section><section data-markdown><script type="text/template">
## Method definition shorthand

```javascript
    // ES5
    function getCar(make, model, value) {
        return {
            depreciate: function() {
                this.value -= 2500;
            }
        };
    }
```

vs

```javascript
    // ES6
    // Method definition shorthand syntax omits `function` keyword & colon
    function getCar(make, model, value) {
        return {
            depreciate() {
                this.value -= 2500;
            }
        };
    }
```
</script></section><section data-markdown><script type="text/template">
## Property accessors


    function getCar(make, model, value) {
        return {
            _value: value,
            get value() {
                return this._value;
            },
            set value(value) {
                if (value < 0)
                    throw new Error('invalid value');
                this._value = value;
            }
    }

    let car = getCar('Volvo', 'V70', 30000);
    console.log(car.value);     // OUTPUT: 30000
    car.value = -1;             <- ERROR
</script></section><section data-markdown><script type="text/template">
## The arrow function

Simpler syntax

```javascript
    var createGreeting = function(message, name) {
        return message + name;
    }

    // version 1
    const arrowGreeting = (message, name) => {
        return message + name;
    }

    // version 2
    const arrowGreeting = (message, name) => message + name;
```
</script></section><section data-markdown><script type="text/template">
## The arrow function

This reference

```javascript
    const service = {
      foo: 'peter',
      delayLog(timeout) {
        setTimeout(function() {
          console.log(this.foo)
        }, timeout)
      }
    }
    service.delayAction(500)    > Output ?
```

Easier with arrow function

```javascript
    const service = {
      foo: 'peter',
      delayAction(timeout) {
        delayLog(() => {
          console.log(this.foo)
        }, timeout)
      }
    }
    service.delayAction(500)    > Output ?
```
<!-- .element: class="fragment" data-fragment-index="2" -->
</script></section><section data-markdown><script type="text/template">
## Import / Export

```javascript
    // service.js
    export const MAX_LENGTH = 1000;
    export class Car() {
        ...
    }
    const config = {
        ...
    }
    export default config;
```

```javascript
    import config from 'service';
    import { MAX_LENGTH, Car } from 'service'

    import * as lib from 'service';
    console.log(lib.MAX_LENGTH)
    const car = new lib.Car();

    import config, { MAX_LENGTH, Car } from 'service'

```
</script></section><section data-markdown><script type="text/template">
## The class

```javascript
    // ES6
    class Car {
        constructor(make, model, value) {
            this.make = make;
            this.model = model;
            this._value = value;
        }

        get value() {
            return this._value;
        },

        depreciate: function() {
            this.value -= 2500;
        }
    }
```

</script></section><section data-markdown><script type="text/template">
## Classes don't hoist

```javascript
    // this works
    var foo = new Foo(1, 2);
    function Foo(x, y) {
       this.x = x;
       this.y = y;
    }

    // ReferenceError
    var foo = new Foo(1, 2);
    class Foo {
       constructor(x, y) {
          this.x = x;
          this.y = y;
       }
    }
```
</script></section><section data-markdown><script type="text/template">
## Don't overuse classes!

```javascript
    export class Utils {
        trim(text) {
            ...
        }
        parseDate(dateString) {
            ...
        }
    }

    import { Util } from './util'
    var utils = new Util();
    utils.trim(' abc    ');
```

The class don't hold state and no constructor!

```javascript
    // better
    export const trim = (text) => {
        ...
    }
    export const parseDate = (dateString) => {
        ...
    }

    import { trim } from './util'
    trim(' abc    ');
```
</script></section><section data-markdown><script type="text/template">
## String interpollation

Multiline with interpollation

```javascript
    const message = 'world'
    const template = `
        <div>
            <span>Hello ${message}</span>
        </div>
    `;
```

You get the opportunity to pre process the template string literals plus the values.

```javascript
    const message = `1 and 1 make ${1 + 1}`;
    console.log(message);
```

Inside the interpolation (${ and }) is treated as a JavaScript expression

> No more string concatenation!
</script></section></section><section ><section data-markdown><script type="text/template">
# More advanced ES6

> What you should know.
</script></section><section data-markdown><script type="text/template">
## Rest operator

```javascript
    // ES5: remember this one
    function join() {
        var arg = Array.prototype.slice.call(arguments);
        var separator = arg[0];
        arg.shift();
        return arg.join(separator);
    }
    console.log(join('//', 'one', 'two', 'three'));

```

```javascript
    // ES6: easy
    function join(separator, ...values) {
        return values.join(separator);
    }
```
</script></section><section data-markdown><script type="text/template">
## Spread operator

```javascript
    function volume(width, length, height) {
        return width * length * height;
    };

    console.log(volume(...[2, 8, 5]));
```

Modify an immutable array

```javascript
    // mutable change
    function addElement(array, element) {
        array.push(element);
        return array;
    }

    // immutable change, pure function (redux!)
    function addElement(array, element) {
        return [
            ...array,
            element
        ]
    }
```

Clone an array

```javascript
    const newArray = [...oldArray];
```
</script></section><section data-markdown><script type="text/template">
## Promises

Replaces Q, Bluebird, ... One rules them all

```javascript
    function timeout(duration = 0) {
        return new Promise((resolve, reject) => {
            setTimeout(resolve, duration);
        })
    }
```

```javascript
    var p = timeout(1000)
        .then(() => {
            return timeout(2000);
        })
        .then(() => {
            throw new Error("hmm");
        })
        .catch(err => {
            return Promise.all([timeout(100), timeout(200)]);
        })
```

```javascript
    // wait for multiple promises
    Promise.all([p1, p2, p3]).then(values => {
        console.log(values); // [3, 1337, "foo"]
    });
```
</script></section><section data-markdown><script type="text/template">
## Destructuring

```javascript
    var myConfig = {
        url: 'www.google.com/api',
        data: 'some value',
        methodType: 'POST'
    };

    // ES5
    function makeAjaxRequest(config){
        var url = config.url;
        var method = config.methodType;
        var data = config.data;
        console.log(url, method, data );
    }
```

```javascript
    // ES6
    function makeAjaxRequest(config){
        var { url, methodType, data } = config;
        console.log(url, methodType, data );
    }
```


```javascript
    // array destructering
    [a, b, ...rest] = [1, 2, 3, 4, 5];
```

```javascript
    // destructor result of multiple promises
    Promise.all([p1, p2])
        .then(([p1Result, p2Result]) => {
            console.log(p1Result); // [3, "foo"]
            console.log(p1Result); // [3, "foo"]
        });
```
</script></section><section data-markdown><script type="text/template">
### Object.is

```javascript
    // we all know
    “0” == 0  // true
    “0” === 0 // false (better to use this)

    // but this doesn't work
    NaN == NaN  // false
    NaN === NaN  // false

    var result = isNan(NaN) // workaround
```

```javascript
    // ES6 - this is always correct
    Object.is(0 ,”0”) // false
    Object.is(0 ,0) // true
    Object.is(NaN, NaN) // true
```

</script></section><section data-markdown><script type="text/template">
### Object.assign

```javascript
    // combine object
    const obj = { foo: 123 };
    Object.assign(obj, { bar: true });
    console.log(JSON.stringify(obj));  // OUTPUT: {"foo":123,"bar":true}
```

```javascript
    // adding properties to this
    class Point {
       constructor(x, y) {
            Object.assign(this, {x, y});
        }
    }
```

```javascript
   // Providing default values for object properties
    const DEFAULTS = {
        logLevel: 0,
        outputFormat: 'html'
    };
    function processContent(options) {
        options = Object.assign({}, DEFAULTS, options); // (A)
        ···
    }
```
</script></section><section data-markdown><script type="text/template">
### Object.keys

Retrieves all string keys of all enumerable own (non-inherited) properties.

```javascript
    const x = {
        id: 1234,
        name: 'abc',
    }
    Object.keys(x) === ['id', 'name']
```

Alternative

```javascript
    for (const key in obj) {
        ...
    }
```
</script></section><section data-markdown><script type="text/template">
### Generators

The basics

```javascript
    function *foo() {
        yield 1;
        yield 2;
        yield 3;
        yield 4;
        yield 5;
    }
```

```javascript
    // get an iterator
    var it = foo();

    // get the result
    it.foo();     // 1
    it.foo();     // 2
    it.foo();     // 3
    ...

    // loop over
    for(const i of it) {
        console.log(i)
    }
```
</script></section><section data-markdown><script type="text/template">
### Generators

More practical example

```javascript
    var activeUsers = _.filter(users, function(user) {
        return user.isActive
    });
    var ages = _.map(activeUsers, function(user) {
        return user.age
    });
```

```javascript
    function *map(items, transform) {
      for (item of items)
        yield transform(item);
    }
    function *filter(items, predicate) {
      for (item of items)
        if (predicate(item))
          yield item;
    }
```

```javascript
    for (const user of activeusers) {
        console.log(user);
    }
```
</script></section><section data-markdown><script type="text/template">
## Still using underscore?

```javascript
    // Underscore                           ES5/6
    // ----------------------               ---------------------
    _.each(array, iteratee)                 array.forEach(iteratee)
    _.map(array, iteratee)                  array.map(iteratee)
    _.reduce(array, iteratee, memo)         array.reduce(iteratee, memo)
    _.every(array, predicate)               array.every(predicate)
    _.some(array, predicate)                array.some(predicate)
    _.find(array, predicate)                array.find(predicate)
    _.includes(array, element)              array.includes(element)
    _.toArray(arguments)                    [...arguments]
    _.compact(array)                        array.filter(x => !!x)
    _.indexOf(array, value)                 array.indexOf(value)
    _.keys(object)                          Object.keys(object)
```

```javascript
    _.assign({}, source, {a:false})         Object.assign({},source,{a:false})
    _.extendOwn({}, object)                 { ...object }
    _.isArray(object)                       Array.isArray(object)
    _.noop                                  () => {}
    _.template("hello <%= name %>")         `hello ${name}`
    _.deepClone(source)                     X
```
</script></section><section data-markdown><script type="text/template">
## Symbols

Properties of an object can be either a string (as in ES5)
or symbol (new in ES6)

```javascript
    var key = Symbol("key");
    const myObject = {
        [key]: 'abc'
    }
```

Can be used as private variable

```javascript
    var key = Symbol("key");

    class MyClass {
        constructor(privateData) {
            this[key] = privateData;
        }
    }

    var x = new MyClass('hello')
    console.log(JSON.stringify(x))    > Output: {}
```
</script></section><section data-markdown><script type="text/template">
## String interpollation - Tagged templates

Tagged templates

```javascript
    const id = 1;
    const query = grahql `
        query {
            user(id: ${id})
        }
    `

    function grahql(literals, ...placeholders) {
      console.log('literals', literals);
      console.log('placeholder', placeholders);
      console.log('raw', literals.raw[0]);
    }
```

You get the opportunity to pre process the template string literals plus the values.
</script></section></section><section ><section data-markdown><script type="text/template">
# ES.next features

> This is good to know
</script></section><section data-markdown><script type="text/template">
### Class Fields

```javascript
    class MyClass {
        myProp = 42;
        static myStaticProp = 21;
        constructor() {}
    }
```

<small>Stage 2<br>Babel plugins:[transform-class-properties] </small>

<aside class="notes" data-markdown>Already supported in TypeScript 1.x</aside></script></section><section data-markdown><script type="text/template">
## Object spread operator

```javascript
    const myObject = { id: 12345, name: 'abc' }

    // my immutable object change
    const newObject = {
        ...myObject
        id: 54321
    }
```

<small>Stage 2<br>Babel plugins:[transform-object-rest-spread] </small>

> Great for immutable objects!

<aside class="notes" data-markdown>It is supported by TypeScript 2.0+</aside></script></section><section data-markdown><script type="text/template">
## Async / Await

```javascript
    // an async function
    const fetchSomething = () => new Promise((resolve) => {
        setTimeout(() => resolve('future value'), 500);
    });
```

```javascript
    // ES5
    const promiseFunc = () => new Promise((resolve) => {
        fetchSomething().then(result => {
            resolve(result + ' 2');
        });
    });

    // ES7
    async function asyncFunction() {
        const result = await fetchSomething(); // returns promise
        return result + ' 2';
    }
```

<small>Stage 3<br>Babel plugins:[transform-async-to-generator] </small>

> Makes unit tests much more easier

<aside class="notes" data-markdown>It is supported by TypeScript 1.7+</aside></script></section><section data-markdown><script type="text/template">
## Decorators

```javascript
    // A simple decorator
    @annotation
    class MyClass { }

    function annotation(target) {
       // Add a property on target
       target.annotated = true;
    }
```

```javascript
    // A decorator with argument
    @displayName('Auto')
    class Car { }

    function displayName(target, name) {
       target.displayName = name;
    }
```

<small>Stage 1<br>Babel plugins:[transform-decorators-legacy] </small><br>
<small>Standard available in TypeScript 1.5+</small>

> Angular2 in ES6: use ["es2015", "angular2"]
</script></section><section data-markdown><script type="text/template">
## Trailing Function Commas

```javascript

    // Trailing commas are ignored in object literals and arrays
    const myObject = {
        id: 1234,
        name: 'peter',
    }
    const cities = {
        'antwerp',
        'mechelen',
        'brussel',
    }
```

```javascript
    // ES8 - makes it possible on function arguments
    function doThis(
        commandName,
        isMandatory,
    )
```

<small>Stage 3<br>Babel plugins:[syntax-trailing-function-commas] </small>

> Cleaner diff in your git repo
</script></section></section><section ><section data-markdown><script type="text/template">
# Want to be a better ES6 developer

> Start using a linter: ESLint or TSLint
</script></section><section data-markdown><script type="text/template">
## Setup
</script></section><section data-markdown><script type="text/template">
## IDE Support

- Visual Studio Code
- WebStorm
- Atom
</script></section></section><section ><section data-markdown><script type="text/template">
# What's next
</script></section><section data-markdown><script type="text/template">
## Help and Information

- [ES.Next News](http://esnextnews.com/)
</script></section><section data-markdown><script type="text/template">
# Start using the power of Javascript
</script></section></section></div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            function extend() {
              var target = {};
              for (var i = 0; i < arguments.length; i++) {
                var source = arguments[i];
                for (var key in source) {
                  if (source.hasOwnProperty(key)) {
                    target[key] = source[key];
                  }
                }
              }
              return target;
            }

            // Optional libraries used to extend on reveal.js
            var deps = [
              { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
              { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
              { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
              { src: 'plugin/math/math.js', async: true }
            ];

            // default options to init reveal.js
            var defaultOptions = {
              controls: true,
              progress: true,
              history: true,
              center: true,
              transition: 'default',
              dependencies: deps
            };

            // options from URL query string
            var queryOptions = Reveal.getQueryHash() || {};

            var options = {
  "controls": true,
  "progress": true,
  "history": true,
  "slideNumber": true,
  "width": 960,
  "height": 700,
  "margin": 0.1,
  "minScale": 0.2,
  "maxScale": 2
};
            options = extend(defaultOptions, options, queryOptions);
            Reveal.initialize(options);
        </script>
        
          <script src="/scripts/mjr-es6"></script>
    </body>
</html>

